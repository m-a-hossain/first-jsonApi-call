<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>json and api</h1>

    <h1> first Api calls</h1>
    <ul id="ul-container">

    </ul>
</body>
<!-- creating for post request  -->
<H1>Api call for POST</H1>
 <input id="name" type="text" placeholder="name">
 <input id="email" type="text" placeholder="email address">
 <input id="bod" type="date" placeholder="date of birth">
 <input id="pass" type="password" placeholder="password">
 <button id="submit">Submit</button>

<script>
    // get request ----------------------------------------------
   fetch('https://jsonplaceholder.typicode.com/users')
  .then(response => response.json())
  .then(json => callUser(json))
  //console.log(json)


  function callUser(users){
      const userNames= users.map(user =>user.username)
     // console.log(userName)
     const ul= document.getElementById('ul-container')
     for(let i =0; i <userNames.length; i++){
         const username= userNames[i]
         //console.log(username)
         const li=document.createElement('li')
         li.innerText=username
         ul.appendChild(li)
     }
  }


 /*    const friends = {
        name:'suhel', age: 22, address: 'sylhet',city:['dhaka','jasore','khulna'], blood:['a','b','ab']
    }
    const getFriend = JSON.stringify(friends)
    console.log(getFriend)
    const frindsJson = JSON.parse(getFriend)
    console.log(frindsJson) */

    //post request---------------------------------------------------------------------------------
         
           
          document.getElementById('submit').addEventListener('click', function(){
             /*  console.log('clicked') */
             let name =document.getElementById('name').value 
             let email =document.getElementById('email').value 
             let dob= document.getElementById('bod').value
             let pass =document.getElementById('pass').value 

          const post= {name:name, email:email, dob:dob, pass:pass}
             callDataByPost(post)
          })
     
          function callDataByPost(postInfo){
                    fetch('https://jsonplaceholder.typicode.com/posts', {
                        method: 'POST',
                        body: JSON.stringify(postInfo),
                     /*    ({
                          
                        /*  title: 'foo',
                            body: 'bar',
                            userId: 1,
                            name:'suhel' 
                        }), */
                        headers: {
                            'Content-type': 'application/json; charset=UTF-8',
                        },
                        })
                        .then((response) => response.json())
                        .then((post) => console.log(post))
                        .catch(error => alert('please try again') )
          }

  
</script>
</html>